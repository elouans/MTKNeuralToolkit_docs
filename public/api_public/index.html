<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>MTKNeuralToolkit</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="Public API Reference
Complete reference for all functions intended for direct user interaction. These constitute the stable public API of MTKNeuralToolkit.

Neuron Building Functions
build_IF
build_IF(input=nothing; name=:IF)

Build an Integrate-and-Fire neuron with threshold dynamics and reset mechanism.
Parameters:

input: Optional stimulus (TimeVaryingFunction, Constant, etc.)
name: Symbol for neuron identification (default: :IF)

Returns: ODESystem representing IF neuron with event-driven spiking
Implementation Details:

Uses BasicSoma with C=10μF capacitance
Implements threshold detection and reset mechanism

Example:">
    <meta name="generator" content="Hugo 0.148.2">
    
    
    
      <meta name="robots" content="index, follow">
    
    

    
<link rel="stylesheet" href="/MTKNeuralToolkit_docs/ananke/css/main.min.8d048772ae72ab11245a0e296d1f2a36d3e3dd376c6c867394d6cc659c68fc37.css" >




    


    
      

    

    

    
      <link rel="canonical" href="https://elouans.github.io/MTKNeuralToolkit_docs/api_public/">
    

    <meta property="og:url" content="https://elouans.github.io/MTKNeuralToolkit_docs/api_public/">
  <meta property="og:site_name" content="MTKNeuralToolkit">
  <meta property="og:title" content="MTKNeuralToolkit">
  <meta property="og:description" content="Public API Reference Complete reference for all functions intended for direct user interaction. These constitute the stable public API of MTKNeuralToolkit.
Neuron Building Functions build_IF build_IF(input=nothing; name=:IF) Build an Integrate-and-Fire neuron with threshold dynamics and reset mechanism.
Parameters:
input: Optional stimulus (TimeVaryingFunction, Constant, etc.) name: Symbol for neuron identification (default: :IF) Returns: ODESystem representing IF neuron with event-driven spiking
Implementation Details:
Uses BasicSoma with C=10μF capacitance Implements threshold detection and reset mechanism Example:">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">

  <meta itemprop="name" content="MTKNeuralToolkit">
  <meta itemprop="description" content="Public API Reference Complete reference for all functions intended for direct user interaction. These constitute the stable public API of MTKNeuralToolkit.
Neuron Building Functions build_IF build_IF(input=nothing; name=:IF) Build an Integrate-and-Fire neuron with threshold dynamics and reset mechanism.
Parameters:
input: Optional stimulus (TimeVaryingFunction, Constant, etc.) name: Symbol for neuron identification (default: :IF) Returns: ODESystem representing IF neuron with event-driven spiking
Implementation Details:
Uses BasicSoma with C=10μF capacitance Implements threshold detection and reset mechanism Example:">
  <meta itemprop="wordCount" content="1191">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="MTKNeuralToolkit">
  <meta name="twitter:description" content="Public API Reference Complete reference for all functions intended for direct user interaction. These constitute the stable public API of MTKNeuralToolkit.
Neuron Building Functions build_IF build_IF(input=nothing; name=:IF) Build an Integrate-and-Fire neuron with threshold dynamics and reset mechanism.
Parameters:
input: Optional stimulus (TimeVaryingFunction, Constant, etc.) name: Symbol for neuron identification (default: :IF) Returns: ODESystem representing IF neuron with event-driven spiking
Implementation Details:
Uses BasicSoma with C=10μF capacitance Implements threshold detection and reset mechanism Example:">

      
    
	
  </head><body class="ma0 avenir bg-near-white production">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l center items-center justify-between">
    <a href="/MTKNeuralToolkit_docs/" class="f3 fw2 hover-white white-90 dib no-underline">
      
        MTKNeuralToolkit
      
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white white-90 no-underline" href="" title="Examples page">
              Examples
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white white-90 no-underline" href="/MTKNeuralToolkit_docs/" title="MTKNeuralToolkit.jl page">
              MTKNeuralToolkit.jl
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white white-90 no-underline" href="" title="Tutorials page">
              Tutorials
            </a>
          </li>
          
        </ul>
      
      <div class="ananke-socials"></div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  
  <article class="flex-l mw8 center ph3 flex-wrap justify-between">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        MTKNeuralToolkit.jl
      </aside><div id="sharing" class="mt3 ananke-socials"></div>
<h1 class="f1 athelas mt3 mb1"></h1>
      
      
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><h1 id="public-api-reference">Public API Reference</h1>
<p>Complete reference for all functions intended for direct user interaction. These constitute the stable public API of MTKNeuralToolkit.</p>
<hr>
<h2 id="neuron-building-functions">Neuron Building Functions</h2>
<h3 id="build_if"><code>build_IF</code></h3>
<pre><code>build_IF(input=nothing; name=:IF)
</code></pre>
<p>Build an Integrate-and-Fire neuron with threshold dynamics and reset mechanism.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>input</code>: Optional stimulus (TimeVaryingFunction, Constant, etc.)</li>
<li><code>name</code>: Symbol for neuron identification (default: <code>:IF</code>)</li>
</ul>
<p><strong>Returns:</strong> ODESystem representing IF neuron with event-driven spiking</p>
<p><strong>Implementation Details:</strong></p>
<ul>
<li>Uses BasicSoma with C=10μF capacitance</li>
<li>Implements threshold detection and reset mechanism</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code># Basic IF neuron
neuron = build_IF(; name=:if_neuron)

# With stimulus
@named stimulus = TimeVaryingFunction(f=t -&gt; ifelse((t &gt; 10) &amp; (t &lt; 20), 100.0, 0.0))
neuron = build_IF(stimulus; name=:driven_neuron)
</code></pre>
<p><strong>Solver Requirement:</strong> Use Rodas5() or other event-aware solvers for proper spike detection</p>
<hr>
<h3 id="build_lif"><code>build_LIF</code></h3>
<pre><code>build_LIF(input=nothing; name=:LIF)
</code></pre>
<p>Build a Leaky Integrate-and-Fire neuron with membrane leak current.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>input</code>: Optional stimulus input</li>
<li><code>name</code>: Symbol for neuron identification (default: <code>:LIF</code>)</li>
</ul>
<p><strong>Returns:</strong> ODESystem representing LIF neuron with leak dynamics</p>
<p><strong>Implementation Details:</strong></p>
<ul>
<li>Uses BasicSoma with C=10μF capacitance</li>
<li>Includes membrane leak for realistic decay dynamics</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code># Basic LIF neuron
neuron = build_LIF(; name=:lif_neuron)

# With input stimulus
neuron = build_LIF(stimulus; name=:driven_lif)
</code></pre>
<p><strong>Use Case:</strong> Large-scale spiking networks, population dynamics</p>
<hr>
<h3 id="build_hhinputnothing-namesoma-confighhconfig"><code>build_HH(input=nothing; name=:soma, config=HHConfig())</code></h3>
<p>Build a Hodgkin-Huxley neuron with Na, K, and leak channels.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>input</code>: Optional stimulus (TimeVaryingFunction, Constant, etc.)</li>
<li><code>name</code>: Symbol for neuron identification</li>
<li><code>config</code>: HHConfig struct with channel parameters</li>
</ul>
<p><strong>Returns:</strong> ODESystem representing the complete neuron model</p>
<p><strong>Channel Composition:</strong></p>
<ul>
<li>Na channel: Fast sodium with m³h gating</li>
<li>K channel: Delayed rectifier with n⁴ gating</li>
<li>Leak channel: Passive conductance</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code># Basic HH neuron
neuron = build_HH(; name=:neuron1)

# With stimulus
@named stimulus = TimeVaryingFunction(f=t -&gt; sin(t))
neuron = build_HH(stimulus; name=:driven_neuron)

# With custom parameters
config = HHConfig(Na_g=120.0, K_g=36.0, C=1.0)
neuron = build_HH(stimulus; name=:custom_neuron, config=config)
</code></pre>
<p><strong>Performance:</strong> Fast simulation with Tsit5() solver</p>
<hr>
<h3 id="build_liu"><code>build_Liu</code></h3>
<pre><code>build_Liu(input=nothing; name=:soma, config=LiuConfig())
</code></pre>
<p>Build a Liu neuron model with calcium dynamics and 8 channel types.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>input</code>: Optional stimulus input</li>
<li><code>name</code>: Symbol for neuron identification (default: <code>:soma</code>)</li>
<li><code>config</code>: LiuConfig struct with channel parameters (default: LiuConfig())</li>
</ul>
<p><strong>Returns:</strong> ODESystem with calcium-sensitive neuron model</p>
<p><strong>Channel Composition:</strong></p>
<ul>
<li>Na: Fast sodium</li>
<li>K: Delayed rectifier potassium</li>
<li>CaS: Slow calcium (persistent)</li>
<li>CaT: Transient calcium (low-threshold)</li>
<li>KCa: Calcium-activated potassium</li>
<li>H: Hyperpolarization-activated cation</li>
<li>DRK: Delayed rectifier K (additional)</li>
<li>Leak: Passive conductance</li>
<li>Uses CalciumSensitiveNeuron soma with C=1μF</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code># Basic Liu neuron
neuron = build_Liu(; name=:ca_neuron)

# With enhanced calcium channels
config = LiuConfig(CaS_g=6.0, KCa_g=5.0, H_g=0.01)
neuron = build_Liu(; name=:enhanced_ca, config=config)
</code></pre>
<p><strong>Solver Requirement:</strong> Use TRBDF2() for stiff calcium dynamics</p>
<hr>
<h3 id="build_prinz"><code>build_Prinz</code></h3>
<pre><code>build_Prinz(input=nothing; name=:soma, config=PrinzConfig())
</code></pre>
<p>Build a Prinz STG neuron model optimized for central pattern generator networks.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>input</code>: Optional stimulus input</li>
<li><code>name</code>: Symbol for neuron identification (default: <code>:soma</code>)</li>
<li><code>config</code>: PrinzConfig struct with STG-realistic parameters (default: PrinzConfig())</li>
</ul>
<p><strong>Returns:</strong> ODESystem optimized for network simulations</p>
<p><strong>Channel Composition:</strong> Same as Liu model but with STG-optimized kinetics</p>
<ul>
<li>Tuned for realistic bursting behavior</li>
<li>Optimized for network synchronization</li>
<li>Uses CalciumSensitiveNeuron soma with configurable C, Ca0, V0</li>
<li>Scaling factors typically applied (×159.2 for conductances)</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code># STG burster neuron
@named drive = TimeVaryingFunction(f=t -&gt; 1.0)  # Constant input
ab_neuron = build_Prinz(drive; name=:AB, config=PrinzConfig(V0=-60.0))

# Network-ready configuration
prinz_cf = 159.2  # Standard STG scaling
config = PrinzConfig(
    Na_g=100.0*prinz_cf, 
    CaS_g=6.0*prinz_cf, 
    H_g=0.01*prinz_cf
)
neuron = build_Prinz(; name=:STG_neuron, config=config)
</code></pre>
<p><strong>Use Case:</strong> Central pattern generators, rhythmic networks</p>
<hr>
<h2 id="network-assembly-functions">Network Assembly Functions</h2>
<h3 id="build_network"><code>build_network</code></h3>
<pre><code>build_network(connections::Dict, neurons::Union{Vector,Dict})
</code></pre>
<p>Assemble a network from neurons and synaptic connections.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>connections</code>: Dict mapping (pre, post) tuples to synapse specifications</li>
<li><code>neurons</code>: Vector or Dict of string-&gt;neuron mappings</li>
</ul>
<p><strong>Returns:</strong> Structurally simplified ODESystem representing the complete network</p>
<p><strong>Connection Format:</strong></p>
<pre><code>connections = Dict(
    (&quot;neuron1&quot;, &quot;neuron2&quot;) =&gt; [(type=:Exc, weight=0.5)],
    (&quot;neuron2&quot;, &quot;neuron3&quot;) =&gt; [(type=:Inh, weight=1.2), (type=:Chol, weight=0.3)]
)
</code></pre>
<p><strong>Example:</strong></p>
<pre><code># Define neurons
neurons = Dict(
    &quot;driver&quot; =&gt; build_HH(stimulus; name=:driver),
    &quot;follower&quot; =&gt; build_HH(; name=:follower)
)

# Define connections
connections = Dict(
    (&quot;driver&quot;, &quot;follower&quot;) =&gt; [(type=:Exc, weight=0.8)]
)

# Build network
network = build_network(connections, neurons)
</code></pre>
<p><strong>Performance:</strong> Recommended for networks &lt;50 neurons</p>
<hr>
<h2 id="channel-and-component-building">Channel and Component Building</h2>
<h3 id="build_neuron"><code>build_neuron</code></h3>
<pre><code>build_neuron(soma, input=nothing; channels)
</code></pre>
<p>Assemble neuron from soma and channel components.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>soma</code>: Neuron soma component (BasicSoma, CalciumSensitiveNeuron)</li>
<li><code>input</code>: Optional input stimulus</li>
<li><code>channels</code>: Vector of channel ODESystems</li>
</ul>
<p><strong>Returns:</strong> Complete neuron ODESystem with proper connectivity</p>
<p><strong>Connection Logic:</strong></p>
<ul>
<li>Connects all channels to soma membrane</li>
<li>Handles calcium flux for calcium-sensitive channels</li>
<li>Manages input current injection</li>
<li>Establishes proper grounding</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code># Build custom neuron
soma = BasicSoma(; C=1.0, name=:soma)
channels = [na_channel, k_channel, leak_channel]
neuron = build_neuron(soma, stimulus; channels=channels)
</code></pre>
<h2 id="configuration-structures">Configuration Structures</h2>
<h3 id="ifconfig"><code>IFConfig</code></h3>
<p>Configuration parameters for Integrate-and-Fire neurons.</p>
<p><strong>Fields:</strong></p>
<ul>
<li><code>V_reset</code>: Reset voltage after spike (default: -2.0 mV)</li>
<li><code>V_th</code>: Spike threshold voltage (default: 10.0 mV)</li>
<li><code>R</code>: Membrane resistance (default: 1.0 MΩ)</li>
<li><code>C</code>: Membrane capacitance (default: 10.0 μF)</li>
<li><code>E</code>: Reversal potential (default: 0.0 mV)</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code># Fast-spiking IF neuron
config = IFConfig(V_th=5.0, V_reset=-5.0, R=0.5, C=5.0)
neuron = build_IF(; config=config)
</code></pre>
<hr>
<h3 id="lifconfig"><code>LIFConfig</code></h3>
<p>Configuration parameters for Leaky Integrate-and-Fire neurons.</p>
<p><strong>Fields:</strong></p>
<ul>
<li><code>V_reset</code>: Reset voltage after spike (default: -2.0 mV)</li>
<li><code>V_th</code>: Spike threshold voltage (default: 10.0 mV)</li>
<li><code>τ_m</code>: Membrane time constant (default: 1.0 ms)</li>
<li><code>R</code>: Membrane resistance (default: 1.0 MΩ)</li>
<li><code>C</code>: Membrane capacitance (default: 10.0 μF)</li>
<li><code>E</code>: Reversal potential (default: 0.0 mV)</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code># Slow, leaky neuron
config = LIFConfig(τ_m=5.0, V_th=15.0, R=2.0)
neuron = build_LIF(; config=config)
</code></pre>
<hr>
<p>Configuration parameters for Hodgkin-Huxley neurons.</p>
<p><strong>Fields:</strong></p>
<ul>
<li><code>Na_g</code>, <code>K_g</code>, <code>Leak_g</code>: Channel conductances (mS/cm²)</li>
<li><code>Na_E</code>, <code>K_E</code>, <code>Leak_E</code>: Reversal potentials (mV)</li>
<li><code>C</code>: Membrane capacitance (μF/cm²)</li>
<li><code>V0</code>: Initial voltage (mV)</li>
</ul>
<p><strong>Defaults:</strong></p>
<pre><code>HHConfig(
    V0=-65.0,
    Na_g=120.0, Na_E=50.0,
    K_g=36.0, K_E=-77.0,
    Leak_g=0.3, Leak_E=-54.4,
    C=1.0
)
</code></pre>
<p><strong>Example:</strong></p>
<pre><code># High-excitability configuration
config = HHConfig(Na_g=150.0, K_g=30.0, C=0.8)
neuron = build_HH(; config=config)
</code></pre>
<hr>
<h3 id="liuconfig"><code>LiuConfig</code></h3>
<p>Configuration parameters for Liu neurons with calcium dynamics.</p>
<p><strong>Fields:</strong></p>
<ul>
<li><code>Na_g</code>, <code>K_g</code>, <code>KCa_g</code>, <code>DRK_g</code>, <code>H_g</code>, <code>Leak_g</code>: Channel conductances</li>
<li><code>CaS_g</code>, <code>CaT_g</code>: Calcium channel conductances</li>
<li>Reversal potentials for all channels</li>
<li><code>C</code>: Capacitance, <code>V0</code>/<code>Ca0</code>: Initial conditions</li>
</ul>
<p><strong>Calcium-Specific Parameters:</strong></p>
<ul>
<li><code>Ca0</code>: Initial calcium concentration</li>
<li>Calcium reversal computed dynamically from Nernst equation</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code># Enhanced calcium dynamics
config = LiuConfig(
    CaS_g=8.0,      # Increased slow calcium
    KCa_g=7.0,      # Enhanced calcium-activated K
    H_g=0.02,       # Stronger h-current
    V0=-60.0        # Depolarized rest
)
neuron = build_Liu(; config=config)
</code></pre>
<hr>
<h3 id="prinzconfig"><code>PrinzConfig</code></h3>
<p>Configuration parameters for Prinz STG neurons.</p>
<p><strong>Fields:</strong> Same structure as LiuConfig with STG-optimized defaults</p>
<p><strong>STG Scaling:</strong> Typically multiply conductances by 159.2 for realistic STG behavior</p>
<pre><code>prinz_cf = 159.2
config = PrinzConfig(
    V0=-60.0,
    Na_g=100.0*prinz_cf,
    CaS_g=6.0*prinz_cf,
    H_g=0.01*prinz_cf
)
</code></pre>
<p><strong>Neuron-Specific Configurations:</strong></p>
<pre><code># AB (Anterior Burster) neuron
ab_config = PrinzConfig(V0=-60.0, H_g=0.01*prinz_cf)

# PY (Pyloric) neuron  
py_config = PrinzConfig(V0=-55.0, KCa_g=0.0*prinz_cf)

# LP (Lateral Pyloric) neuron
lp_config = PrinzConfig(V0=-65.0, CaT_g=0.0*prinz_cf)
</code></pre>
<hr>
<h2 id="type-constants-and-validation">Type Constants and Validation</h2>
<h3 id="synapse_types"><code>SYNAPSE_TYPES</code></h3>
<p>Vector of valid synapse type symbols:</p>
<pre><code>SYNAPSE_TYPES = [:Exc, :Inh, :Chol, :Glut, :Custom]
</code></pre>
<p><strong>Usage in validation:</strong></p>
<pre><code>is_valid_synapse(synapse_type) = synapse_type in SYNAPSE_TYPES
</code></pre>
<hr>
<h2 id="complete-example-stg-network">Complete Example: STG Network</h2>
<pre><code>using MTKNeuralToolkit, OrdinaryDiffEq
using ModelingToolkitStandardLibrary.Blocks: TimeVaryingFunction

# Scaling factors
syn_cf = 0.254
prinz_cf = 159.2

# Create tonic drive
@named tonic_drive = TimeVaryingFunction(f=t -&gt; 1.0)

# Define STG neurons with realistic parameters
neurons = Dict(
    &quot;AB&quot; =&gt; build_Prinz(tonic_drive; name=:AB, config=PrinzConfig(
        V0=-60.0, Na_g=100.0*prinz_cf, CaS_g=6.0*prinz_cf, 
        H_g=0.01*prinz_cf, K_g=50.0*prinz_cf)),
    &quot;PY&quot; =&gt; build_Prinz(; name=:PY, config=PrinzConfig(
        V0=-55.0, Na_g=100.0*prinz_cf, CaS_g=2.0*prinz_cf, 
        KCa_g=0.0*prinz_cf)),
    &quot;LP&quot; =&gt; build_Prinz(; name=:LP, config=PrinzConfig(
        V0=-65.0, Na_g=100.0*prinz_cf, K_g=20.0*prinz_cf, 
        CaT_g=0.0*prinz_cf))
)

# STG connectivity pattern
connections = Dict(
    (&quot;AB&quot;, &quot;LP&quot;) =&gt; [(type=:Chol, weight=30.0*syn_cf), (type=:Glut, weight=30.0*syn_cf)],
    (&quot;AB&quot;, &quot;PY&quot;) =&gt; [(type=:Chol, weight=3.0*syn_cf), (type=:Glut, weight=10.0*syn_cf)],
    (&quot;LP&quot;, &quot;AB&quot;) =&gt; [(type=:Glut, weight=30.0*syn_cf)],
    (&quot;LP&quot;, &quot;PY&quot;) =&gt; [(type=:Glut, weight=1.0*syn_cf)],
    (&quot;PY&quot;, &quot;LP&quot;) =&gt; [(type=:Glut, weight=30.0*syn_cf)]
)

# Build and simulate network
network = build_network_split(connections, neurons)
prob = ODEProblem(network, [], (0.0, 100.0))
sol = solve(prob, TRBDF2())

# Analyze results
voltages = parse_sol_for_membrane_voltages(sol)
plot(sol, idxs=voltages, labels=[&quot;AB&quot; &quot;PY&quot; &quot;LP&quot;])

# Network inspection
result = inspect_network(network)
println(&quot;STG network: $(length(result.neurons)) neurons&quot;)
</code></pre>
<p>This creates a complete three-neuron central pattern generator that should realistic pyloric rhythm dynamics.</p>
<ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white white-70 dn dib-ns pv2 ph3 no-underline" href="https://elouans.github.io/MTKNeuralToolkit_docs/" >
    &copy;  MTKNeuralToolkit 2025 
  </a>
    <div><div class="ananke-socials"></div>
</div>
  </div>
</footer>

  </body>
</html>
